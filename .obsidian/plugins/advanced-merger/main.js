/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var g=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var F=Object.prototype.hasOwnProperty;var y=(o,l)=>{for(var e in l)g(o,e,{get:l[e],enumerable:!0})},v=(o,l,e,i)=>{if(l&&typeof l=="object"||typeof l=="function")for(let t of b(l))!F.call(o,t)&&t!==e&&g(o,t,{get:()=>l[t],enumerable:!(i=m(l,t))||i.enumerable});return o};var N=o=>v(g({},"__esModule",{value:!0}),o);var E={};y(E,{default:()=>c});module.exports=N(E);var a=require("obsidian"),r={de:{MergeFolder:"Ordner zusammenf\xFChren",MergedFilesuffix:"zusammengef\xFChrt",OverwriteFileQuestion:"Vorhandene Datei \xFCberschreiben",Settings:"Einstellungen",SettingSortAlphabetically:"Dateien alphabetisch sortieren",SettingSortAlphabeticallyDescription:"Wenn aktiviert, werden die Dateien im ausgew\xE4hlten Ordner alphabetisch nach ihrem vollst\xE4ndigen Pfad sortiert. Andernfalls werden die Dateien nach dem Erstellungsdatum sortiert (Standardverhalten).",SettingIncludeNestedFolders:"Verschachtelte Ordner einbeziehen",SettingIncludeNestedFoldersDescription:"Wenn aktiviert, werden Dateien in verschachtelten Ordnern zusammengef\xFChrt. Andernfalls werden nur Dateien im ausgew\xE4hlten Ordner zusammengef\xFChrt (Standardverhalten).",Yes:"Ja",No:"Nein"},en:{MergeFolder:"Merge folder",MergedFilesuffix:"merged",OverwriteFileQuestion:"Overwite exising file",Settings:"Settings",SettingSortAlphabetically:"Sort files alphabetically",SettingSortAlphabeticallyDescription:"If enabled, files in selected folder will be sorted alphabetically, according to its full path. Otherwise, files will be sorted by creation date (default behaviour).",SettingIncludeNestedFolders:"Include nested folders",SettingIncludeNestedFoldersDescription:"If enabled, files in nested folders will be included in merge. Otherwise, only files in selected folder will be merged (default behaviour).",Yes:"Yes",No:"No"},fi:{MergeFolder:"Yhdist\xE4 kansio",MergedFilesuffix:"yhdistetty",OverwriteFileQuestion:"Korvaa olemassa oleva tiedosto",Settings:"Asetukset",SettingSortAlphabetically:"Lajittele tiedostot aakkosj\xE4rjestykseen",SettingSortAlphabeticallyDescription:"Jos k\xE4yt\xF6ss\xE4, valitun kansion tiedostot lajitellaan aakkosj\xE4rjestyksess\xE4 sen t\xE4yden polun mukaan. Muussa tapauksessa tiedostot lajitellaan luomisp\xE4iv\xE4m\xE4\xE4r\xE4n mukaan (oletusk\xE4ytt\xE4ytyminen).",SettingIncludeNestedFolders:"Sis\xE4llyt\xE4 sis\xE4kk\xE4iset kansiot",SettingIncludeNestedFoldersDescription:"Jos k\xE4yt\xF6ss\xE4, sis\xE4kk\xE4isten kansioiden tiedostot yhdistet\xE4\xE4n. Muussa tapauksessa vain valitun kansion tiedostot yhdistet\xE4\xE4n (oletustoiminto).",Yes:"Kyll\xE4",No:"Ei"},fr:{MergeFolder:"Fusionner le dossier",MergedFilesuffix:"fusionn\xE9",OverwriteFileQuestion:"Remplacer le fichier existant",Settings:"Param\xE8tres",SettingSortAlphabetically:"Trier les fichiers par ordre alphab\xE9tique",SettingSortAlphabeticallyDescription:"Si activ\xE9, les fichiers du dossier s\xE9lectionn\xE9 seront tri\xE9s par ordre alphab\xE9tique, en fonction de son chemin complet. Sinon, les fichiers seront tri\xE9s par date de cr\xE9ation (comportement par d\xE9faut).",SettingIncludeNestedFolders:"Inclure les dossiers imbriqu\xE9s",SettingIncludeNestedFoldersDescription:"Si activ\xE9, les fichiers des dossiers imbriqu\xE9s seront inclus dans la fusion. Sinon, seuls les fichiers du dossier s\xE9lectionn\xE9 seront fusionn\xE9s (comportement par d\xE9faut).",Yes:"Oui",No:"Non"},ru:{MergeFolder:"\u041E\u0431\u044A\u0435\u0434\u0438\u043D\u0438\u0442\u044C \u043F\u0430\u043F\u043A\u0443",MergedFilesuffix:"\u0441\u043E\u0432\u043C\u0435\u0449\u0435\u043D\u043D\u044B\u0439",OverwriteFileQuestion:"\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u0444\u0430\u0439\u043B",Settings:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",SettingSortAlphabetically:"\u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0444\u0430\u0439\u043B\u044B \u043F\u043E \u0430\u043B\u0444\u0430\u0432\u0438\u0442\u0443",SettingSortAlphabeticallyDescription:"\u0415\u0441\u043B\u0438 \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u043E, \u0444\u0430\u0439\u043B\u044B \u0432 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 \u0431\u0443\u0434\u0443\u0442 \u043E\u0442\u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 \u0430\u043B\u0444\u0430\u0432\u0438\u0442\u043D\u043E\u043C \u043F\u043E\u0440\u044F\u0434\u043A\u0435 \u0432 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u043F\u043E\u043B\u043D\u044B\u043C \u043F\u0443\u0442\u0451\u043C. \u0412 \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u043E\u043C \u0441\u043B\u0443\u0447\u0430\u0435, \u0444\u0430\u0439\u043B\u044B \u0431\u0443\u0434\u0443\u0442 \u043E\u0442\u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u043F\u043E \u0434\u0430\u0442\u0435 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F (\u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u0435 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E).",SettingIncludeNestedFolders:"\u0412\u043B\u044E\u0447\u0430\u0442\u044C \u0432\u043B\u043E\u0436\u0435\u043D\u043D\u044B\u0435 \u043F\u0430\u043F\u043A\u0438",SettingIncludeNestedFoldersDescription:"\u0415\u0441\u043B\u0438 \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u043E, \u0444\u0430\u0439\u043B\u044B \u0432\u043E \u0432\u043B\u043E\u0436\u0435\u043D\u043D\u044B\u0445 \u043F\u0430\u043F\u043A\u0430\u0445 \u0431\u0443\u0434\u0443\u0442 \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u044B \u0432 \u0441\u043B\u0438\u044F\u043D\u0438\u0435. \u0412 \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u043E\u043C \u0441\u043B\u0443\u0447\u0430\u0435 \u0431\u0443\u0434\u0443\u0442 \u043E\u0431\u044A\u0435\u0434\u0438\u043D\u0435\u043D\u044B \u0442\u043E\u043B\u044C\u043A\u043E \u0444\u0430\u0439\u043B\u044B \u0432 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 (\u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u0435 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E).",Yes:"\u0414\u0430",No:"\u041D\u0435\u0442"},ua:{MergeFolder:"\u041E\u0431'\u0454\u0434\u043D\u0430\u0442\u0438 \u043F\u0430\u043F\u043A\u0443",MergedFilesuffix:"\u043E\u0431'\u0454\u0434\u043D\u0430\u043D\u0456",OverwriteFileQuestion:"\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u0442\u0438 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u0444\u0430\u0439\u043B",Settings:"\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F",SettingSortAlphabetically:"\u0421\u043E\u0440\u0442\u0443\u0432\u0430\u0442\u0438 \u0444\u0430\u0439\u043B\u0438 \u0437\u0430 \u0430\u043B\u0444\u0430\u0432\u0456\u0442\u043E\u043C",SettingSortAlphabeticallyDescription:"\u042F\u043A\u0449\u043E \u0432\u0432\u0456\u043C\u043A\u043D\u0435\u043D\u043E, \u0444\u0430\u0439\u043B\u0438 \u0443 \u0432\u0438\u0431\u0440\u0430\u043D\u0456\u0439 \u043F\u0430\u043F\u0446\u0456 \u0431\u0443\u0434\u0443\u0442\u044C \u0432\u0456\u0434\u0441\u043E\u0440\u0442\u043E\u0432\u0430\u043D\u0456 \u0432 \u0430\u043B\u0444\u0430\u0432\u0456\u0442\u043D\u043E\u043C\u0443 \u043F\u043E\u0440\u044F\u0434\u043A\u0443 \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u043D\u043E \u0434\u043E \u043F\u043E\u0432\u043D\u043E\u0433\u043E \u0448\u043B\u044F\u0445\u0443. \u0412 \u0456\u043D\u0448\u043E\u043C\u0443 \u0432\u0438\u043F\u0430\u0434\u043A\u0443 \u0444\u0430\u0439\u043B\u0438 \u0431\u0443\u0434\u0443\u0442\u044C \u0432\u0456\u0434\u0441\u043E\u0440\u0442\u043E\u0432\u0430\u043D\u0456 \u0437\u0430 \u0434\u0430\u0442\u043E\u044E \u0441\u0442\u0432\u043E\u0440\u0435\u043D\u043D\u044F (\u043F\u043E\u0432\u0435\u0434\u0456\u043D\u043A\u0430 \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C).",SettingIncludeNestedFolders:"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u0438 \u0432\u043A\u043B\u0430\u0434\u0435\u043D\u0456 \u043F\u0430\u043F\u043A\u0438",SettingIncludeNestedFoldersDescription:"\u042F\u043A\u0449\u043E \u0432\u0432\u0456\u043C\u043A\u043D\u0435\u043D\u043E, \u0444\u0430\u0439\u043B\u0438 \u0443 \u0432\u043A\u043B\u0430\u0434\u0435\u043D\u0438\u0445 \u043F\u0430\u043F\u043A\u0430\u0445 \u0431\u0443\u0434\u0443\u0442\u044C \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u0456 \u0432 \u043E\u0431\u2019\u0454\u0434\u043D\u0430\u043D\u043D\u044F. \u0412 \u0456\u043D\u0448\u043E\u043C\u0443 \u0432\u0438\u043F\u0430\u0434\u043A\u0443 \u0431\u0443\u0434\u0435 \u043E\u0431\u2019\u0454\u0434\u043D\u0430\u043D\u043E \u043B\u0438\u0448\u0435 \u0444\u0430\u0439\u043B\u0438 \u0443 \u0432\u0438\u0431\u0440\u0430\u043D\u0456\u0439 \u043F\u0430\u043F\u0446\u0456 (\u043F\u043E\u0432\u0435\u0434\u0456\u043D\u043A\u0430 \u0437\u0430 \u0437\u0430\u043C\u043E\u0432\u0447\u0443\u0432\u0430\u043D\u043D\u044F\u043C).",Yes:"\u0422\u0430\u043A",No:"\u041D\u0456"}},A={sortAlphabetically:!1,includeNestedFolders:!1},w="git-merge",k="Advanced Merger",D="en",I="file-menu",f=`
`,x=`

`,c=class extends a.Plugin{async onload(){this.language=r[navigator.language]==null?D:navigator.language,await this.loadSettings(),this.registerEvent(this.app.workspace.on(I,(e,i)=>{if(!(i instanceof a.TFolder))return;let t=i;e.addItem(n=>{n.setTitle(r[this.language].MergeFolder).setIcon(w).onClick(async s=>await this.onClickCallback(t,s))})})),this.addSettingTab(new u(this.app,this))}async onClickCallback(e,i){let{vault:t}=this.app,n=this.fileSort(t.getMarkdownFiles().filter(d=>this.fileFilter(e,d))),s=`${e.path}-${r[this.language].MergedFilesuffix}.md`;if(await t.adapter.exists(s,!1)){new h(this.app,this.language,s,async d=>{if(!d){console.info(`file "${s}" already exists, but user cancelled deleting..`);return}console.info(`file "${s}" already exists, deleting..`),await t.adapter.remove(s),await this.mergeFiles(t,n,s)}).open();return}await this.mergeFiles(t,n,s)}async mergeFiles(e,i,t){let n=await e.create(t,"");i.forEach(async(s,p)=>{let d=await e.read(s),S=s.name.replace(/\.md$/,"");d=`${p===0?"":f}# ${S}${x}${d}${f}`,console.info(`Adding file "${s.name}" as section "${S}" into file "${t}"..`),e.append(n,d)})}fileFilter(e,i){var t,n;return this.settings.includeNestedFolders?!!((t=i.parent)!=null&&t.path.startsWith(e.path)):((n=i.parent)==null?void 0:n.path)==e.path}fileSort(e){return this.settings.sortAlphabetically?e.sort((i,t)=>{let n=i.path.toLowerCase(),s=t.path.toLowerCase();return n<s?-1:n>s?1:0}):e.reverse()}async loadSettings(){this.settings=Object.assign({},A,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},u=class extends a.PluginSettingTab{constructor(e,i){super(e,i);this.plugin=i}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:`${k} - ${r[this.plugin.language].Settings}`}),new a.Setting(e).setName(r[this.plugin.language].SettingSortAlphabetically).setDesc(r[this.plugin.language].SettingSortAlphabeticallyDescription).addToggle(i=>i.setValue(this.plugin.settings.sortAlphabetically).onChange(async t=>{this.plugin.settings.sortAlphabetically=t,await this.plugin.saveSettings()})),new a.Setting(e).setName(r[this.plugin.language].SettingIncludeNestedFolders).setDesc(r[this.plugin.language].SettingIncludeNestedFoldersDescription).addToggle(i=>i.setValue(this.plugin.settings.includeNestedFolders).onChange(async t=>{this.plugin.settings.includeNestedFolders=t,await this.plugin.saveSettings()}))}},h=class extends a.Modal{constructor(e,i,t,n){super(e);this.language=i,this.existingFileName=t,this.onSubmitHandler=n}onOpen(){let{contentEl:e}=this;e.createEl("h3",{text:`${r[this.language].OverwriteFileQuestion} "${this.existingFileName}"?`}),new a.Setting(e).addButton(i=>i.setButtonText(r[this.language].No).setCta().onClick(()=>{this.close(),this.onSubmitHandler(!1)})).addButton(i=>i.setButtonText(r[this.language].Yes).setCta().onClick(()=>{this.close(),this.onSubmitHandler(!0)}))}onClose(){let{contentEl:e}=this;e.empty()}};
